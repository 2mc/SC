<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1038.35">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica; min-height: 22.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000; min-height: 14.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #d00c0c; min-height: 12.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cf0c0c}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cf0c0c; min-height: 12.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #d00c0c}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #737373}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #162bc4}
span.s1 {color: #1e39f6}
span.s2 {color: #162bc4}
span.s3 {color: #000000}
span.s4 {color: #008323}
span.s5 {color: #737373}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>UniquePlay</b></p>
<p class="p2"><b></b><br></p>
<p class="p3"><b>Inherits from: UniqueSynth : AbstractUniqueServerObject : UniqueObject : Object</b></p>
<p class="p4"><span class="Apple-converted-space"> </span></p>
<p class="p5">Play a function, like with Function:play, except that:<span class="Apple-converted-space"> </span></p>
<p class="p6"><br></p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>-<span class="Apple-tab-span">	</span>No need to start the server before playing the function: It is started for you if needed.<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span></p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>-<span class="Apple-tab-span">	</span>Any Buffers needed for the function will be loaded before it starts, if they are defined</p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>as instances of UniqueBuffer</p>
<p class="p6"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>-<span class="Apple-tab-span">	</span>You can add one or more routines that will operate on the synth of the function, using method rsync.</p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>Such routines stop when the synth generated by the function is freed</p>
<p class="p6"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>-<span class="Apple-tab-span">	</span>You can store a UniquePlay instance on a symbol and recall it later with \asymbol.playFunc. (see below)</p>
<p class="p6"><span class="Apple-converted-space">  </span></p>
<p class="p3"><span class="Apple-tab-span">	</span>- <span class="Apple-tab-span">	</span>The same function will not be restarted, until the synth it is created is freed.<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>(To play the same function multiple times concurrently use aFunction.mplay(...). See below.)</p>
<p class="p4"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>*new(playFunc, target, outbus = 0, fadeTime = 0.02, addAction=\addToHead, args, key)</b></p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>playFunc</b>: A function to play, in the same manner as Function:play</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The following 4 arguments correspond exactly to the arguments of Function:play:<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>target</b>:<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>A group or server where the functions's synth should be created.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>outbus</b>: <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The bus to which the output of the synth will be assigned.<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>fadeTime</b>:<span class="Apple-tab-span">	</span>Duration of the fade-in and fade-out parts of the envelope added to the synth</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>addAction</b>: <span class="Apple-tab-span">	</span>See help file: <a href="SC://Order-of-execution"><span class="s1">Order-of-execution</span></a></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>key</b>: A symbol, If provided, the UniquePlay instance will become accessible by sending to the key symbol</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>messages: synth, set, free, release.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p3">It is more<span class="Apple-converted-space">  </span>convenient to generate instances of UniquePlay by sending following 2 messages to a UGen-graph-creating function:<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span><b>{ ... (Ugen-func) }.uplay(...args);</b><span class="Apple-tab-span">	</span>: play this function one time only. Can be restarted only after its synth stops.<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>args: target, outbus, fadeTime, addAction </b>: These correspond to the arguments passed to Function:play.</p>
<p class="p4"><br></p>
<p class="p3"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span><b>{ ... Ugen-func) }.mplay(...args);</b><span class="Apple-tab-span">	</span>: play this function any number of times concurrently.<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span></p>
<p class="p3"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><b>args: </b>as with Function:uplay</p>
<p class="p4"><span class="Apple-converted-space">  </span></p>
<p class="p3"><span class="Apple-converted-space">  </span>To store the UniquePlay created from a function to a symbol for later access, use this shortcut:<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-converted-space">  </span></p>
<p class="p3"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span><b>\aSymbol.playFunc({ Ugen-func} ... args)</b> : play function and store UniquePlay instance on \aSymbol</p>
<p class="p7"><br></p>
<p class="p3"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><b>args: </b>as with Function:uplay</p>
<p class="p7"><span class="Apple-converted-space"> </span></p>
<p class="p8">/*</p>
<p class="p8">To run an example, go anywhere after the //: mark that starts it and before the next //: example,<span class="Apple-converted-space"> </span></p>
<p class="p8">and press Command-Shift-x.</p>
<p class="p9"><br></p>
<p class="p8">To select the next example, press Command-shift-j</p>
<p class="p8">To select the previous example, press Command-shift-k</p>
<p class="p9"><br></p>
<p class="p8">*/</p>
<p class="p9"><br></p>
<p class="p8">//:play a function with uplay: starts also when server is not booted:<span class="Apple-converted-space"> </span></p>
<p class="p10">{ <span class="s2">SinOsc</span>.ar(400 + 400.rand, 0, 0.1) }.uplay;</p>
<p class="p9"><br></p>
<p class="p8">//:play only once. Repeats are ignored.</p>
<p class="p9"><br></p>
<p class="p10">10 do: { { <span class="s2">SinOsc</span>.ar(400 + 400.rand, 0, 0.1) }.uplay; }; // only one synth is created;</p>
<p class="p4"><br></p>
<p class="p8">//:play many times.<span class="Apple-converted-space"> </span></p>
<p class="p10">10 do: { { <span class="s2">SinOsc</span>.ar(400 + 400.rand, 0, 0.05) }.mplay; }; // 10 synths are created;</p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p12">//:symbol + playFunc</p>
<p class="p7"><br></p>
<p class="p12">// Ensure that the rest of the code will run in-time after start of server:</p>
<p class="p12"><span class="s2">WaitForServer</span><span class="s3">.new; </span>// Wait for server to start, if needed</p>
<p class="p11"><br></p>
<p class="p13"><span class="s4">\def</span>.playFunc({ <span class="s2">| freq = 400 |</span> <span class="s2">SinOsc</span>.ar(freq, 0, 0.1) });</p>
<p class="p12"><span class="s3">1.wait;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// can call wait right from the selected code if executed with Cmd-shift-x</p>
<p class="p13"><span class="s4">\def</span>.set(<span class="s4">\freq</span>, 800);</p>
<p class="p13">1.wait;</p>
<p class="p13"><span class="s4">\def</span>.release(2);</p>
<p class="p11"><br></p>
<p class="p12">//:play a function multiple times, (server-boot-safe), for specified durations:<span class="Apple-converted-space"> </span></p>
<p class="p11"><br></p>
<p class="p12"><span class="s2">WaitForServer</span><span class="s3">.new;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Wait for server to start, if needed</p>
<p class="p12"><span class="s2">thisThread</span><span class="s3">.randSeed_(4);<span class="Apple-tab-span">	</span></span>// always play the same sequence</p>
<p class="p13">100 do: {<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span>{ <span class="s2">SinOsc</span>.ar(exprand(400, 1800), 0, 0.1) }.mplay(dur: 0.01, fadeOut: exprand(0.01, 3));</p>
<p class="p13"><span class="Apple-tab-span">	</span>exprand(0.02, 1).wait;</p>
<p class="p13">};</p>
<p class="p11"><br></p>
<p class="p12">//:fun</p>
<p class="p8"><span class="s2">WaitForServer</span><span class="s3">.new;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Wait for server to start, if needed</p>
<p class="p11"><br></p>
<p class="p14">"hello "<span class="s3">.post;</span></p>
<p class="p11"><br></p>
<p class="p13">a = { <span class="s2">WhiteNoise</span>.ar(<span class="s2">EnvGen</span>.kr(<span class="s2">Env</span>.perc(0.001, 0.7, 0.3), doneAction: 2)) }.uplay;</p>
<p class="p11"><br></p>
<p class="p13">a.wait(0.2);</p>
<p class="p11"><br></p>
<p class="p13">a = { <span class="s2">WhiteNoise</span>.ar(<span class="s2">LFTri</span>.kr(10 + <span class="s2">LFNoise1</span>.kr(2, 3), 0, 0.2)) }.uplay(fadeTime: 4).dur(5);</p>
<p class="p11"><br></p>
<p class="p15"><span class="s4">\default</span><span class="s3">.play.rsynca({ </span>| s | // start synth with default SynthDef (See UniqueSynth).</p>
<p class="p12"><span class="s3"><span class="Apple-tab-span">	</span></span><span class="s2">thisThread</span><span class="s3">.randSeed_(5);<span class="Apple-tab-span">	</span></span>// always play the same sequence</p>
<p class="p13"><span class="Apple-tab-span">	</span>220 do: { <span class="s2">| i |</span> (i + 11 / 5).reciprocal.wait;<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.set(<span class="s4">\freq</span>, ((4..16) * 110) @@ ((i % 4).rand + (i / 20 % 60))); <span class="s5">"."</span>.post;</p>
<p class="p13"><span class="Apple-tab-span">	</span>};</p>
<p class="p13"><span class="Apple-tab-span">	</span>1.wait;</p>
<p class="p13"><span class="Apple-tab-span">	</span>s.release;</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">" there"</span>.postln;</p>
<p class="p13">});</p>
<p class="p4"><span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-converted-space">    </span></p>
</body>
</html>
