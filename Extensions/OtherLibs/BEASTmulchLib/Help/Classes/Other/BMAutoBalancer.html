<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.54">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #001bec}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #002afb}
span.s3 {color: #000000}
span.s4 {text-decoration: underline}
span.s5 {color: #0000bf}
span.s6 {color: #007300}
span.s7 {color: #bf0000}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>BMAutoBalancer<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>automatically balances a set of speakers</b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: </b><a href="SC://Object"><span class="s2"><b>Object</b></span></a></p>
<p class="p3"><br></p>
<p class="p1">BMAutoBalancer is a utility class which can be used to automatically balance a set of loudspeakers, specified as a <a href="../Inputs and Outputs/BMInOutArray.html"><span class="s2">BMInOutArray</span></a> containing instances of <a href="../Inputs and Outputs/BMSpeaker.html"><span class="s2">BMSpeaker</span></a> (any Associations containe therein will be ignored). A typical hardware configuration for this would involve an omni-directional microphone at the centre of a speaker array. The results will be used to populate each speaker's <b>autoTrim</b> var, which is used in BMTrimPluginsRack's autoTrim method.</p>
<p class="p2"><br></p>
<p class="p1">BMAutoBalancer sends three bursts of filtered pink noise (through a BPF with bandwidth from 100 to 4000 Hz) out of each speaker in turn, and records the highest RMS amplitude for each burst. Once completed it takes the mean of each set of three and uses it to populate the speaker's autoTrim var with a value in dBFS. The values will be specified relative to the lowest level detected, rather than absolute, i.e. the quietest speaker will have an autoTrim of 0dBFS, all others &lt;= 0dBFS.</p>
<p class="p2"><br></p>
<p class="p4"><span class="s3"><b>See also:</b> <a href="../Inputs and Outputs/BMSpeaker.html"><span class="s4">BMSpeaker</span></a>, <a href="../Inputs and Outputs/BMInOutArray.html"><span class="s4">BMInOutArray</span></a>, <a href="../Plugins/BMTrimPluginsRack.html"><span class="s4">BMTrimPluginsRack</span></a>, <a href="BMAutoBalancerGUI.html"><span class="s4">BMAutoBalancerGUI</span></a></span></p>
<p class="p2"><br></p>
<p class="p5"><b>Creation / Class Methods</b></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*run (speakerList, okayFunc, server, in, onlyFullRange)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Run through a balancing cycle. This fails if a cycle is already in progress.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>speakerList </b>- The <a href="../Inputs and Outputs/BMInOutArray.html"><span class="s2">BMInOutArray</span></a> to balance. This is done in place.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>okayFunc </b>- An optional <a href="SC://Function"><span class="s2">Function</span></a> to evaluate when the cycle is complete. This will be passed <b>speakerList</b> as an argument.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server </b>- The <a href="SC://Server"><span class="s2">Server</span></a> to use. nil indicates the default server.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>in </b>- The hardware input bus (starting from 0) to which the microphone signal is connected. Default value is 0.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>onlyFullRange </b>- A <a href="SC://Boolean"><span class="s2">Boolean</span></a>. If true, only include speakers for which speaker.spec.fullRange == true. This excludes subwoofers and other specialised speakers. Default is true.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*stop</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Stop a running balancing cycle.</p>
<p class="p6"><br></p>
<p class="p6"><br></p>
<p class="p10"><b>Accessing Class Variables</b></p>
<p class="p8"><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*running</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns a Boolean indicating whether a balancing cycle is in progress.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><b>Examples</b></p>
<p class="p3"><br></p>
<p class="p11">l = [<span class="s5">BMSpeaker</span>(<span class="s6">\left</span>, 0), <span class="s5">BMSpeaker</span>(<span class="s6">\right</span>, 1), <span class="s5">BMSpeaker</span>(<span class="s6">\sub</span>, 2, spec: <span class="s6">'Generic Sub'</span>)].as(<span class="s5">BMInOutArray</span>); <span class="s7">// sub will be ignored</span></p>
<p class="p12"><br></p>
<p class="p13">BMAutoBalancer<span class="s3">.run(l);</span></p>
<p class="p12"><br></p>
<p class="p14"><span class="s5">BMAutoBalancerGUI</span><span class="s3">(l); </span>// also GUI version</p>
</body>
</html>
